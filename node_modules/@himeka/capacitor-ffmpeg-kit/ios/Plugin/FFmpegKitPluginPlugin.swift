import Foundation
import Capacitor

@objc(FFmpegKitPluginPlugin)
public class FFmpegKitPluginPlugin: CAPPlugin {
    private let implementation = FFmpegKitPlugin()

    @objc func echo(_ call: CAPPluginCall) {
        let value = call.getString("value") ?? ""
        call.resolve([
            "value": implementation.echo(value)
        ])
    }

    @objc func executeFFmpegCommand(_ call: CAPPluginCall) {
        guard let command = call.getString("command") else {
            call.reject("Command not provided.")
            return
        }

        let returnCode = implementation.executeCommand(command)
        if returnCode >= 0 {
            call.resolve(["result": "Success", "returnCode": returnCode])
        } else {
            call.reject("Failed to execute command.")
        }
    }
}
